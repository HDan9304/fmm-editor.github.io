<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Player Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Poppins font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --grad-start:#FF7AD9;
      --grad-end:#FF3D7F;
      --accent:#FF5AC8;
      --error:#FF4D9A;
    }
    * { box-sizing: border-box; }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: #101123;
      background-image: radial-gradient(#2b2c3f 1px, transparent 1px);
      background-size: 20px 20px;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      min-height: 100vh;
      color: #f5f5f5;
    }

    .container {
      border-radius: 22px;
      background:
        linear-gradient(#18192B, #18192B) padding-box,
        linear-gradient(90deg,var(--grad-start),var(--grad-end)) border-box;
      border: 2px solid transparent;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      max-width: 520px;
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    h2 { margin: 0 0 12px; font-size: 22px; font-weight: 600; color: #fff; text-align: center; }

    .field { margin-bottom: 10px; }
    .field label { display: block; margin-bottom: 6px; font-weight: 500; color: #ddd; font-size: 14px; }
    .field label .required { color: var(--accent); font-weight: 700; }

    /* Inputs */
    .field input {
      width: 100%; padding: 10px; border: 1px solid #444; border-radius: 12px;
      font-size: 16px; background: #242537; color: #f5f5f5; outline: none;
      transition: border-color 0.2s, box-shadow 0.2s, background 0.2s, padding-left 0.2s;
    }
    .field input[type="text"] { text-transform: capitalize; }
    .field input:focus { border-color: var(--accent); background: #2b2c3f; box-shadow: 0 0 8px rgba(255,90,200,0.55); }

    /* Year warning */
    .error { border-color: var(--error) !important; box-shadow: 0 0 8px rgba(255,77,154,0.6) !important; }
    .hint { font-size:12px; color:#bdbdbd; margin-top:4px; }
    .warn { color: var(--error); display:none; }

    /* Required-field visual feedback */
    .field.req .req-msg { display:block; }
    .field.req input { border-color: var(--error); box-shadow: 0 0 10px rgba(255,77,154,0.55); }
    .field.req .combo input { border-color: var(--error); box-shadow: 0 0 10px rgba(255,77,154,0.55); }
    .req-msg { display:none; font-size:12px; color: var(--error); margin-top:6px; }
    .shake { animation: shake 240ms ease-in-out 0s 1; }
    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-3px); }
    }

    .result-label { margin-top: 10px; margin-bottom: 6px; font-size: 15px; font-weight: 600; color: var(--accent); }

    /* Results container + empty state */
    #results {
      padding: 16px;
      border: 1px solid #444;
      border-radius: 16px;
      background: #242537;
      min-height: 160px;
      max-height: 300px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      margin-bottom: 14px;
    }
    #results.empty { justify-content: center; }

    .empty-state {
      display: none;
      border: 1px solid #3a3b4f;
      background: #202233;
      color: #b9b9c9;
      border-radius: 16px;
      height: 72px;
      padding: 0 16px;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    #results.empty .empty-state { display: flex; }

    /* Individual lines */
    .res-line {
      display: flex; align-items: flex-start; gap: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      background: #242537;
      outline: 1px solid rgba(255,90,200,0.16);
    }
    .res-text {
      flex: 1 1 auto; min-height: 18px; line-height: 1.6;
      font-family: 'Poppins', monospace; font-size: 14px; color: #f5f5f5; outline: none;
    }
    .res-text[contenteditable="true"]:focus {
      background: #2b2c3f; box-shadow: inset 0 0 0 1px var(--accent), 0 0 8px rgba(255,90,200,0.35);
      border-radius: 8px; padding: 2px 4px;
    }

    /* Minimal icon buttons */
    .icon-btn {
      border: none; background: transparent; color: #ff9bd9;
      padding: 6px 8px; border-radius: 8px; cursor: pointer;
      display: inline-flex; align-items: center; justify-content: center;
    }
    .icon-btn:hover { background: rgba(255,90,200,0.1); }
    .icon-btn svg { width: 18px; height: 18px; display: block; }

    /* Primary/secondary buttons */
    .btn {
      border: none; color: white; padding: 12px; border-radius: 14px; font-size: 14px; font-weight: 600;
      cursor: pointer; text-align: center; background: linear-gradient(90deg,var(--grad-start),var(--grad-end));
    }
    .btn:hover { filter: brightness(1.06); }

    .btn.cta { padding: 16px; font-size: 16px; border-radius: 16px; }
    .btn-secondary { background: transparent; border: 2px solid var(--accent); color: var(--accent); }
    .btn-secondary:hover { background: rgba(255,90,200,0.08); }

    .full-width { width: 100%; margin: 6px 0 10px; display: block; }

    .actions-row { display: flex; gap: 10px; flex-wrap: wrap; }
    .actions-row .btn { flex: 1 1 0; }

    .copy-status { margin-top: 6px; font-size: 12px; color: #9ad29a; min-height: 16px; }

    /* Combo (searchable dropdown with square logo inside input) */
    .combo { position: relative; }
    .combo input { padding: 10px; }
    .combo.has-logo input { padding-left: 42px; }
    .combo-logo {
      position: absolute; top: 50%; left: 10px; transform: translateY(-50%);
      width: 20px; height: 20px; border-radius: 6px; object-fit: contain; background: #18192B; border: 1px solid #3a3b4f;
      pointer-events: none; display: none;
    }
    .combo.has-logo .combo-logo { display: block; }
    .combo-panel {
      position: absolute; left: 0; right: 0; top: calc(100% + 6px);
      background: #242537; border: 1px solid #444; border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
      max-height: 260px; overflow-y: auto; padding: 6px; display: none; z-index: 999;
    }
    .combo.open .combo-panel { display: block; }
    .combo-item { display: flex; align-items: center; gap: 10px; padding: 8px 10px; border-radius: 10px; cursor: pointer; font-size: 14px; color: #f5f5f5; }
    .combo-item:hover, .combo-item.active { background: #2b2c3f; outline: 1px solid var(--accent); }
    .combo-item img { width: 22px; height: 22px; border-radius: 6px; object-fit: contain; background: #18192B; border: 1px solid #3a3b4f; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Player Data Input</h2>

    <!-- Basic fields -->
    <div class="field" id="field-first">
      <label for="firstName">First Name <span class="required">*</span></label>
      <input id="firstName" type="text" autocomplete="off" />
      <div class="req-msg" id="msg-first">This field is required.</div>
    </div>

    <div class="field" id="field-last">
      <label for="lastName">Last Name <span class="required">*</span></label>
      <input id="lastName" type="text" autocomplete="off" />
      <div class="req-msg" id="msg-last">This field is required.</div>
    </div>

    <!-- Current Club -->
    <div class="field" id="field-current">
      <label for="currentClub">Current Club <span class="required">*</span></label>
      <div class="combo" id="comboCurrent">
        <img id="logoCurrent" class="combo-logo" alt="">
        <input id="currentClub" type="text" placeholder="Search club…" autocomplete="off" />
        <div class="combo-panel"></div>
      </div>
      <div class="req-msg" id="msg-current">This field is required.</div>
      <div class="hint">Type to search, ↑/↓ to move, Enter to select.</div>
    </div>

    <!-- New Club -->
    <div class="field">
      <label for="newClub">New Club</label>
      <div class="combo" id="comboNew">
        <img id="logoNew" class="combo-logo" alt="">
        <input id="newClub" type="text" placeholder="Search club…" autocomplete="off" />
        <div class="combo-panel"></div>
      </div>
      <div class="hint">Type to search, ↑/↓ to move, Enter to select.</div>
    </div>

    <!-- Other fields -->
    <div class="field"><label for="newFirstName">New First Name</label><input id="newFirstName" type="text" autocomplete="off" /></div>
    <div class="field"><label for="newLastName">New Last Name</label><input id="newLastName" type="text" autocomplete="off" /></div>
    <div class="field"><label for="newShortName">New Short Name</label><input id="newShortName" type="text" autocomplete="off" /></div>

    <!-- Year -->
    <div class="field">
      <label for="yearOfBirth">Year of Birth (4 digits)</label>
      <input id="yearOfBirth" type="text" inputmode="numeric" pattern="\d{4}" />
      <div id="yearWarn" class="hint warn">Year should be between 1900 and 2025.</div>
    </div>

    <div class="field">
      <label for="ca">CA (0–100)</label>
      <input id="ca" type="number" min="0" max="100" inputmode="numeric" />
      <div class="hint">Converted to 0–200 in result: (a ÷ 100) × 200</div>
    </div>

    <div class="field">
      <label for="pa">PA (0–100)</label>
      <input id="pa" type="number" min="0" max="100" inputmode="numeric" />
      <div class="hint">Converted to 0–200 in result: (a ÷ 100) × 200</div>
    </div>

    <!-- Results -->
    <div class="result-label">Results</div>
    <div id="results" class="empty">
      <div class="empty-state">No results yet</div>
    </div>

    <!-- Buttons -->
    <button class="btn full-width cta" id="addBtn">Add Result</button>
    <div class="actions-row">
      <button class="btn" id="copyBtn">Copy All</button>
      <button class="btn btn-secondary" id="clearBtn">Clear</button>
    </div>
    <div id="copyStatus" class="copy-status"></div>
  </div>

  <script>
    (function(){
      "use strict";

      const STORAGE_KEY = "playerEditorResults";
      const YEAR_MIN = 1900, YEAR_MAX = 2025;

      const FALLBACK_LOGO =
        'data:image/svg+xml;utf8,' +
        encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64">
          <rect width="100%" height="100%" fill="#18192B"/>
          <rect x="18" y="18" width="28" height="28" rx="6" ry="6" fill="#FF5AC8"/>
        </svg>`);

      const clubs = [
        { name: "Barcelona", logo: "https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%28crest%29.svg" },
        { name: "Real Madrid", logo: "https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg" },
        { name: "Manchester United", logo: "https://upload.wikimedia.org/wikipedia/en/7/7a/Manchester_United_FC_crest.svg" },
        { name: "Liverpool", logo: "https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.svg" }
      ];

      /* ===== Shortcuts & helpers ===== */
      const $ = (id) => document.getElementById(id);
      const resultsEl = $('results');
      const addBtn = $('addBtn');

      function capWords(str){ return String(str||'').trim().replace(/\b([a-zA-Z])/g,(m,p)=>p.toUpperCase()); }
      function clamp01(n){ return Math.max(0, Math.min(100, n)); }
      function convertTo200Scale(v){ if(v===""||isNaN(+v))return ""; const n=clamp01(+v); return Math.round((n/100)*200); }
      function setCopyStatus(msg){ $('copyStatus').textContent = msg || ''; }

      /* ===== Empty state & CTA sizing ===== */
      function updateEmptyState(){
        const hasLines = resultsEl.querySelector('.res-line') !== null;
        resultsEl.classList.toggle('empty', !hasLines);
        addBtn.classList.toggle('cta', !hasLines);
      }

      /* ===== Minimal icons (inline SVG) ===== */
      function trashSVG(){
        return `
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
     stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
     aria-hidden="true" focusable="false">
  <polyline points="3 6 5 6 21 6"></polyline>
  <path d="M19 6l-1 14H6L5 6"></path>
  <path d="M10 11v6"></path>
  <path d="M14 11v6"></path>
  <path d="M9 6V4h6v2"></path>
</svg>`;
      }
      function copySVG(){
        return `
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
     stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
     aria-hidden="true" focusable="false">
  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
  <path d="M5 15V5a2 2 0 0 1 2-2h10"></path>
</svg>`;
      }

      /* Clipboard helper with fallback */
      function copyToClipboard(text){
        if (navigator.clipboard && navigator.clipboard.writeText) {
          return navigator.clipboard.writeText(text);
        }
        return new Promise((resolve, reject) => {
          try {
            const ta = document.createElement('textarea');
            ta.value = text;
            ta.style.position = 'fixed';
            ta.style.opacity = '0';
            document.body.appendChild(ta);
            ta.focus(); ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
            resolve();
          } catch (e) { reject(e); }
        });
      }

      /* ===== Results list (per-line) ===== */
      function makeLineEl(text){
        const line = document.createElement('div');
        line.className = 'res-line';

        const span = document.createElement('span');
        span.className = 'res-text';
        span.contentEditable = 'true';
        span.textContent = text;

        const copyBtn = document.createElement('button');
        copyBtn.className = 'icon-btn';
        copyBtn.title = 'Copy line';
        copyBtn.setAttribute('aria-label','Copy line');
        copyBtn.innerHTML = copySVG();

        const delBtn = document.createElement('button');
        delBtn.className = 'icon-btn';
        delBtn.title = 'Delete line';
        delBtn.setAttribute('aria-label','Delete line');
        delBtn.innerHTML = trashSVG();

        copyBtn.addEventListener('click', () => {
          copyToClipboard(span.textContent.trim())
            .then(() => setCopyStatus('Copied line ✅'))
            .catch(err => alert('Copy failed: ' + err));
        });
        copyBtn.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); copyBtn.click(); }
        });

        delBtn.addEventListener('click', () => {
          line.remove();
          saveResults();
          updateEmptyState();
        });
        delBtn.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); delBtn.click(); }
        });

        span.addEventListener('input', () => saveResults());

        line.append(span, copyBtn, delBtn);
        return line;
      }

      function appendResultLine(text){
        resultsEl.appendChild(makeLineEl(text));
        resultsEl.scrollTop = resultsEl.scrollHeight;
        saveResults();
        updateEmptyState();
      }

      function getAllLines(){
        return Array.from(resultsEl.querySelectorAll('.res-text')).map(el => el.textContent);
      }

      function renderFromLines(lines){
        resultsEl.querySelectorAll('.res-line').forEach(el => el.remove());
        lines.forEach(t => { if (t && String(t).trim()!=='') resultsEl.appendChild(makeLineEl(t)); });
        updateEmptyState();
      }

      function saveResults(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(getAllLines())); }

      function loadResults(){
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) { updateEmptyState(); return; }
        let lines = [];
        try { const p = JSON.parse(raw); lines = Array.isArray(p)?p:String(raw).split(/\n/); }
        catch { lines = String(raw).split(/\n/); }
        renderFromLines(lines);
      }

      /* ===== Build result string ===== */
      function buildResult() {
        const g = id => ($(id)?.value || "").trim();
        const first = capWords(g("firstName"));
        const last  = capWords(g("lastName"));
        const curr  = capWords(g("currentClub"));
        if (!first || !last || !curr) return "";
        const newFirst  = capWords(g("newFirstName"));
        const newLast   = capWords(g("newLastName"));
        const shortName = capWords(g("newShortName"));
        const year      = g("yearOfBirth");
        const ca        = convertTo200Scale(g("ca"));
        const pa        = convertTo200Scale(g("pa"));
        const newClub   = capWords(g("newClub"));
        return `"PLAYER" "${first}" "${last}" "${curr}" "${newFirst}" "${newLast}" "${shortName}" "${year}" "${ca}" "${pa}" "${newClub}"`;
      }

      function clearAllInputs() {
        ["firstName","lastName","currentClub","newClub","newFirstName","newLastName","newShortName","yearOfBirth","ca","pa"]
          .forEach(id => { const el=$(id); if(el) el.value=""; });
        $("comboCurrent").classList.remove("has-logo");
        $("comboNew").classList.remove("has-logo");
        $('yearWarn').style.display='none';
        $('yearOfBirth').classList.remove('error');
      }

      /* ===== Year & number validation ===== */
      function limitYear(el){
        el.value = el.value.replace(/\D+/g, '').slice(0, 4);
        const warn = $('yearWarn'); const val = el.value;
        if (val && (val.length !== 4 || +val < YEAR_MIN || +val > YEAR_MAX)) { el.classList.add('error'); warn.style.display='block'; }
        else { el.classList.remove('error'); warn.style.display='none'; }
      }
      function isYearValidOrEmpty(){
        const val = ($('yearOfBirth').value || '').trim();
        if (!val) return true;
        if (val.length !== 4) return false;
        const n = +val; return !(isNaN(n) || n < YEAR_MIN || n > YEAR_MAX);
      }
      function clampPercent(el){
        if (el.value === "") return;
        let n = parseInt(el.value,10); if (isNaN(n)) { el.value=""; return; } el.value = Math.max(0, Math.min(100, n));
      }

      /* ===== Combo (searchable dropdown with logo) ===== */
      function initCombo(comboId, inputId, logoId) {
        const combo = $(comboId), input = $(inputId), logo = $(logoId), panel = combo.querySelector(".combo-panel");
        let visible = [], activeIndex = -1;
        const open = () => combo.classList.add("open");
        const close = () => { combo.classList.remove("open"); activeIndex = -1; };
        const isOpen = () => combo.classList.contains("open");

        function filter(q){
          const query = (q || "").toLowerCase().trim();
          if (!query) return clubs.slice(0, 50);
          return clubs.filter(c => c.name.toLowerCase().includes(query)).slice(0, 100);
        }
        function render(list){
          panel.innerHTML = ""; visible = list;
          if (!list.length){ const d=document.createElement("div"); d.className="combo-item"; d.style.opacity=".7"; d.textContent="No matches"; panel.appendChild(d); return; }
          list.forEach((club, idx) => {
            const item = document.createElement("div"); item.className="combo-item"; item.dataset.index=idx;
            const img = document.createElement("img"); img.src = club.logo || FALLBACK_LOGO; img.alt = club.name; img.onerror=()=>{img.src=FALLBACK_LOGO;};
            const span = document.createElement("span"); span.textContent = club.name;
            item.append(img, span);
            item.addEventListener("mousedown",(e)=>{ e.preventDefault(); select(idx); });
            panel.appendChild(item);
          });
        }
        function select(idx){
          const club = visible[idx]; if (!club) return;
          input.value = club.name; logo.src = club.logo || FALLBACK_LOGO; logo.onerror=()=>{logo.src=FALLBACK_LOGO;};
          combo.classList.add("has-logo"); close();
          clearReqFor(input); // clear required state when a club is chosen
        }
        function moveActive(delta){
          if (!isOpen()) open();
          const items = panel.querySelectorAll(".combo-item"); if (!items.length) return;
          activeIndex = (activeIndex + delta + items.length) % items.length;
          items.forEach(el => el.classList.remove("active")); const a=items[activeIndex]; a.classList.add("active");
          const pr = panel.getBoundingClientRect(), ir = a.getBoundingClientRect();
          if (ir.top < pr.top) panel.scrollTop -= (pr.top - ir.top);
          if (ir.bottom > pr.bottom) panel.scrollTop += (ir.bottom - pr.bottom);
        }

        input.addEventListener("focus", () => { render(filter(input.value)); open(); });
        input.addEventListener("input", () => { if (input.value.trim()==="") combo.classList.remove("has-logo"); render(filter(input.value)); open(); clearReqFor(input); });
        input.addEventListener("keydown", (e) => {
          if (!isOpen() && (e.key==="ArrowDown"||e.key==="ArrowUp")) { render(filter(input.value)); open(); }
          switch (e.key) {
            case "ArrowDown": e.preventDefault(); moveActive(1); break;
            case "ArrowUp":   e.preventDefault(); moveActive(-1); break;
            case "Enter":     if (isOpen()) { e.preventDefault(); if (activeIndex>=0) select(activeIndex); else if (visible.length) select(0); } break;
            case "Escape":    close(); break;
          }
        });
        document.addEventListener("click", (e) => { if (!combo.contains(e.target)) close(); });
      }

      /* ===== Required fields UX ===== */
      const requiredInputs = [
        { id: 'firstName', field: 'field-first', msg: 'msg-first' },
        { id: 'lastName',  field: 'field-last',  msg: 'msg-last' },
        { id: 'currentClub', field: 'field-current', msg: 'msg-current' }
      ];

      function markReqFor(inputEl){
        const fieldEl = inputEl.closest('.field');
        if (!fieldEl) return;
        fieldEl.classList.add('req', 'shake');
        setTimeout(() => fieldEl.classList.remove('shake'), 260);
      }
      function clearReqFor(inputEl){
        const fieldEl = inputEl.closest('.field');
        if (!fieldEl) return;
        fieldEl.classList.remove('req');
      }

      function validateRequired(showFeedback = false){
        const missing = [];
        requiredInputs.forEach(({id}) => {
          const el = $(id);
          if (!el || !el.value.trim()) missing.push(el);
        });

        if (showFeedback && missing.length) {
          // show & focus the first missing
          missing.forEach(el => markReqFor(el));
          const first = missing[0];
          first.scrollIntoView({ behavior: 'smooth', block: 'center' });
          setTimeout(() => first.focus(), 220);
        }
        return missing.length === 0;
      }

      /* ===== Actions ===== */
      function addResult(){
        if (!validateRequired(true)) return;

        if (!isYearValidOrEmpty()) {
          $('yearOfBirth').classList.add('error'); $('yearWarn').style.display='block';
          alert('Year must be a 4-digit number between 1900 and 2025 (or leave it empty).');
          return;
        }
        const line = buildResult();
        if (!line) return;
        appendResultLine(line);
        clearAllInputs();
      }
      function copyResults(){
        const text = getAllLines().join('\n').trim(); if (!text) return;
        copyToClipboard(text).then(()=>{ setCopyStatus('Copied all results ✅'); }).catch(err=>alert('Copy failed: '+err));
      }
      function clearResults(){ resultsEl.querySelectorAll('.res-line').forEach(el=>el.remove()); saveResults(); setCopyStatus(''); updateEmptyState(); }

      /* ===== DOM Ready ===== */
      document.addEventListener('DOMContentLoaded', () => {
        loadResults();
        initCombo("comboCurrent", "currentClub", "logoCurrent");
        initCombo("comboNew",     "newClub",     "logoNew");

        // Validation wiring
        $('yearOfBirth').addEventListener('input', e => limitYear(e.target));
        $('ca').addEventListener('input', e => clampPercent(e.target));
        $('pa').addEventListener('input', e => clampPercent(e.target));

        // Clear req highlighting as user types
        ['firstName','lastName','currentClub'].forEach(id => {
          $(id).addEventListener('input', (e) => {
            if (e.target.value.trim()) clearReqFor(e.target);
          });
        });

        // Buttons
        $('addBtn').addEventListener('click', addResult);
        $('copyBtn').addEventListener('click', copyResults);
        $('clearBtn').addEventListener('click', clearResults);

        // Global Enter-to-Add (ignore if a combo is open or editing a result line)
        document.addEventListener('keydown', (e) => {
          if (e.key !== 'Enter') return;
          const active = document.activeElement;
          const editingResult = active && active.classList && active.classList.contains('res-text') && active.isContentEditable;
          const comboOpen = document.querySelector('.combo.open');
          if (!editingResult && !comboOpen) { e.preventDefault(); addResult(); }
        });

        updateEmptyState();
      });
    })();
  </script>
</body>
</html>
